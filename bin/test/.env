source ./bin/.env

NETWORK_SUBNET='10.10.1.0/24'
TESTENV_LABEL=${PROJECT}_testenv
TEST_PASSWORD=test

COMMON_SERVICE_CREATE_OPTIONS=(--network=${NETWORK} --label=${TESTENV_LABEL} --detach=true)

RABBITMQ_SERVICE="${PROJECT}_rabbitmq"
RABBITMQ_SERVICE_IMAGE=rabbitmq:3.7.8-management-alpine
RABBITMQ_SERVICE_AMQP_PUBLISH_PORT=10001
RABBITMQ_SERVICE_MANAGEMENT_PUBLISH_PORT=10002
AMQP_VHOST=Test
AMQP_USER=test
AMQP_PORT=5672
AMQP_SSL_ENABLED=0
AMQP_SERVICE_CREATE_OPTIONS=( \
    --env AMQP_HOST=${RABBITMQ_SERVICE} \
    --env AMQP_VHOST=${AMQP_VHOST} \
    --env AMQP_PORT=${AMQP_PORT} \
    --env AMQP_SSL_ENABLED=${AMQP_SSL_ENABLED} \
    --env AMQP_USER=${AMQP_USER} \
    --secret=${AMQP_PASSWORD_SECRET} \
    --env AMQP_PASSWORD_SECRET=${AMQP_PASSWORD_SECRET} \
)

MYSQL_SERVICE="${PROJECT}_mysql"
MYSQL_SERVICE_IMAGE=mysql:5.7
MYSQL_SERVICE_PORT=3306
MYSQL_SERVICE_PUBLISH_PORT=10003

MYSQL_USER=root
MYSQL_HOST=${MYSQL_SERVICE}
MYSQL_PORT=${MYSQL_SERVICE_PORT}
MYSQL_SERVICE_CREATE_OPTIONS=( \
    --env MYSQL_HOST=${MYSQL_HOST} \
    --env MYSQL_PORT=${MYSQL_PORT} \
    --secret=${MYSQL_PASSWORD_SECRET} \
    --env MYSQL_USER=${MYSQL_USER} \
    --env MYSQL_PASSWORD_SECRET=${MYSQL_PASSWORD_SECRET} \
)

MYSQL_ADMIN_SERVICE=${MYSQL_SERVICE}_admin
MYSQL_ADMIN_SERVICE_IMAGE=phpmyadmin/phpmyadmin:4.8.3
MYSQL_ADMIN_PORT=80
MYSQL_ADMIN_PUBLISH_PORT=10004
